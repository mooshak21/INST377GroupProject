<html>
  <head>
    <title>A Leaflet map!</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.js"></script>
    <link
      href="https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
      integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
      crossorigin=""
    />
    <script src="node_modules/heatmap.js"></script>
    <script src="node_modules/leaflet-heatmap/leaflet-heatmap.js"></script>
    <script
      src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
      integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
      crossorigin=""
    ></script>
    <script src="https://raw.githubusercontent.com/pa7/heatmap.js/develop/plugins/leaflet-heatmap/leaflet-heatmap.js"></script>
    <script
      type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDSRaf70vFXXQKdbO2tFIyWoy3liycB6-g&libraries=visualization"
    ></script>
    <script type="text/javascript" src="pgcounty.json"></script>
    <style>
      #map {
        height: 50%;
      }
    </style>
  </head>
  <body>
    <h1 class="title">HeatMap of Foreclosures</h1>
    <!-- we need to put this into a container  -->
    <div id="map"></div>

    <script>
      /* fetch('https://github.com/mooshak21/INST377GroupProject/blob/master/pgcounty.json')
    .then(response => response.json())
    .then(data => console.log(data)); */
          
           var heatmapData = [
        new google.maps.LatLng(37.782, -122.447),
        new google.maps.LatLng(37.782, -122.445),
        new google.maps.LatLng(37.782, -122.443),
        new google.maps.LatLng(37.782, -122.441),
        new google.maps.LatLng(37.782, -122.439),
        new google.maps.LatLng(37.782, -122.437),
        new google.maps.LatLng(37.782, -122.435),
        new google.maps.LatLng(37.785, -122.447),
        new google.maps.LatLng(37.785, -122.445),
        new google.maps.LatLng(37.785, -122.443),
        new google.maps.LatLng(37.785, -122.441),
        new google.maps.LatLng(37.785, -122.439),
        new google.maps.LatLng(37.785, -122.437),
        new google.maps.LatLng(37.785, -122.435)
      ];

      var geojson = {
              type: "FeatureCollection",
              features: [
                {
                  type: "Feature",
                  geometry: {
                    type: "Point",
                    coordinates: [-77.032, 38.913],
                  },
                  properties: {
                    title: "Mapbox",
                    description: "Washington, D.C.",
                  },
                },
                {
                  type: "Feature",
                  geometry: {
                    type: "Point",
                    coordinates: [-122.414, 37.776],
                  },
                  properties: {
                    title: "Mapbox",
                    description: "San Francisco, California",
                  },
                },
              ],
            };

            for(let i = 0; i < geojson.features.length; i++) {
                var listOfCoord = [];
                listOfCoord.push(geojson.features[i].geometry.coordinates);
            }

            console.log(listOfCoord);
            console.log(geojson.features[0].geometry.coordinates);



      var sanFrancisco = new google.maps.LatLng(38.9, -76.9);

      map = new google.maps.Map(document.getElementById('map'), {
        center: sanFrancisco,
        zoom: 13,
        mapTypeId: 'roadmap'
      });

      var heatmap = new google.maps.visualization.HeatmapLayer({
        data: heatmapData
      });
      heatmap.setMap(map);
           /*  mapboxgl.accessToken =
              "pk.eyJ1IjoibW9vc2hhazIxIiwiYSI6ImNrOXQ0bmYxMDA2bmYzbW5kaGswYXhoNTcifQ.GHzCy5ZJ5HcjNhqF4JiXdw";
            var map = new mapboxgl.Map({
              container: "map", // container id
              style: "mapbox://styles/mapbox/streets-v11", // stylesheet location
              center: [-76.945, 38.9936], // starting position [lng, lat]
              zoom: 13, // starting zoom
            });
            var geojson = {
              type: "FeatureCollection",
              features: [
                {
                  type: "Feature",
                  geometry: {
                    type: "Point",
                    coordinates: [-77.032, 38.913],
                  },
                  properties: {
                    title: "Mapbox",
                    description: "Washington, D.C.",
                  },
                },
                {
                  type: "Feature",
                  geometry: {
                    type: "Point",
                    coordinates: [-122.414, 37.776],
                  },
                  properties: {
                    title: "Mapbox",
                    description: "San Francisco, California",
                  },
                },
              ],
            };
            geojson.features.forEach(function (marker) {
              // create a HTML element for each feature
              var el = document.createElement("div");
              el.className = "marker";

              // make a marker for each feature and add to the map
              new mapboxgl.Marker(el)
                .setLngLat(marker.geometry.coordinates)
                .addTo(map);
            });
            /* fetch("./pgcounty.json")
              .then((response) => response.json())
              .then((data) => {
                console.log(data);
                const Marker1 = L.Marker()
                  .setLngLat(data[1].Coordinates.reverse())
                  .addTo(map);
                const propertyid1 = data[1].propertyid;
                Marker1.bindPopup(propertyid1).openPopup();
              });
            map.on("load", function () {
              map.addSource("foreclosed", {
                type: "json",
                data: "./pgcounty.json",
              });
              map.addLayer({
                id: "foreclosed-heat",
                type: "heatmap",
                source: "foreclosed",
              });
              map.addLayer({
                id: "trees-point",
                type: "circle",
                source: "foreclosed",
              });
            });
            map.on("click", "trees-point", function (e) {
              new mapboxgl.Popup().setLngLat(e.Coordinates.reverse());
            }); */
    </script>
  </body>
</html>
